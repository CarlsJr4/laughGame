<!DOCTYPE html>
<html lang="en">
  <head>
    <title>You laugh you lose!</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="main.css">
    <!--I can't believe it is not bootstrap!-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet"> 
    
    <!-- import the webpage's javascript file -->
    <!--<script src="/script.js" defer></script> This is if you want to import something with javascript -->
  </head>  
  <body>
    <h1><center>You Laugh you Lose the Game</center></h1>

</div>

<!--    <table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Rankings</th>
      <th scope="col">Names</th>
    </tr>
  </thead>
  <tbody>
    <tr class="table-warning">
      <th scope="row">1st place</th>
      <td>Mark</td>
    </tr>
    <tr class="table-dark">
      <th scope="row">2nd place</th>
      <td>Jacob</td>
    </tr>
    <tr class="table-danger">
      <th scope="row">3rd place</th>
      <td>Larry</td>
    </tr>
  </tbody>
</table>
-->

<!-- Core Firebase App -->
<script src="https://www.gstatic.com/firebasejs/5.9.4/firebase-app.js"></script>


<!-- Optional Firebase Products -->
<script src="https://www.gstatic.com/firebasejs/5.9.4/firebase-storage.js"></script>

<script>
    // Initialize Firebase
    var config = {
    apiKey: "AIzaSyD8iDW5qyquSFDLTIXkocdKckj6XPejpZo",
    authDomain: "you-laugh-you-lose-245b7.firebaseapp.com",
    databaseURL: "https://you-laugh-you-lose-245b7.firebaseio.com",
    projectId: "you-laugh-you-lose-245b7",
    storageBucket: "you-laugh-you-lose-245b7.appspot.com",
    messagingSenderId: "387946703170"
    };
    firebase.initializeApp(config);
</script>

<img /> <!-- This div holds the funny image -->

<button class="randomize">Next Round</button>
<input type="file"> <!-- This is for development only. An image will be auto-fed after a screenshot is taken -->


<script src="photo.js"></script>
    <div id="screenshot" style="text-align:center;">
    <video class="videostream" autoplay=""></video>
    <img id="screenshot-img" src="">
    <canvas style="display:none;"></canvas>
    <button class="capture-button">Capture video</button>
    </div>
    <button id="screenshot-button">Take screenshot</button>
    <script>
      function hasGetUserMedia() {
        return !!(navigator.mediaDevices &&
                navigator.mediaDevices.getUserMedia);
      }

      if (hasGetUserMedia()) {
        // Good to go!
      } else {
        alert('getUserMedia() is not supported by your browser');
      }
      const constraints = {
        video: true
      };
    const captureVideoButton =
      document.querySelector('#screenshot .capture-button');
    const screenshotButton = document.querySelector('#screenshot-button');
    const img = document.querySelector('#screenshot img');
    const video = document.querySelector('#screenshot video');

    const canvas = document.createElement('canvas');

    captureVideoButton.onclick = function() {
      navigator.mediaDevices.getUserMedia(constraints).
      then(handleSuccess).catch(handleError);
    };

    screenshotButton.onclick = video.onclick = function() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
      // Other browsers will fall back to image/png
      img.src = canvas.toDataURL('image/webp');
    };

    function handleSuccess(stream) {
      screenshotButton.disabled = false;
      video.srcObject = stream;
    }
    </script>
<script src="upload.js"></script>
  </body>
</html>
